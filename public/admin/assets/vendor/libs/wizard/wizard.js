(()=>{var w={d:(t,e)=>{for(var s in e)w.o(e,s)&&!w.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},_={};w.d(_,{A:()=>x});var x=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options={wz_class:".wizard",wz_nav:".wizard-nav",wz_ori:".horizontal",wz_nav_style:"dots",wz_content:".wizard-content",wz_buttons:".wizard-buttons",wz_button:".wizard-btn",wz_button_style:".btn",wz_step:".wizard-step",wz_form:".wizard-form",wz_next:".next",wz_prev:".prev",wz_finish:".finish",wz_highlight:".highlight-error",bubbles:!0,nav:!0,buttons:!0,highlight:!0,current_step:0,steps:0,highlight_time:1e3,navigation:"all",next:"Next",prev:"Prev",finish:"Submit",highlight_type:{error:"error",warning:"warning",success:"success",info:"info"},i18n:{empty_wz:"No item has been found with which to generate the Wizard.",empty_nav:"Nav does not exist or is empty.",empty_content:"Content does not exist or is empty.",empty_html:"Undefined or null content cannot be added.",empty_update:"Nothing to update.",no_nav:"Both the nav and the buttons are disabled, there is no navigation system.",form_validation:"One or more of the form fields are invalid.",diff_steps:"Discordance between the steps of nav and content.",random:"There has been a problem, check the configuration and use of the wizard.",already_defined:"This item is already defined",title:"Step"},...t};let{wz_class:e,wz_nav:s,wz_ori:n,wz_nav_style:i,wz_content:r,wz_buttons:o,wz_button:a,wz_button_style:c,wz_step:h,wz_form:u,wz_next:l,wz_prev:d,wz_finish:z,wz_highlight:v,nav:m,buttons:g,highlight:y,highlight_time:f,highlight_type:S,current_step:p,steps:E,navigation:q,prev:L,next:k,finish:C,i18n:$,bubbles:A}=this.options;Object.assign(this,{wz_class:e,wz_nav:s,wz_ori:n,wz_nav_style:i,wz_content:r,wz_buttons:o,wz_button:a,wz_button_style:c,wz_step:h,wz_form:u,wz_next:l,wz_prev:d,wz_finish:z,wz_highlight:v,nav:m,buttons:g,highlight:y,highlight_time:f,highlight_type:S,current_step:p,steps:E,navigation:q,prev:L,next:k,finish:C,i18n:$,last_step:p,form:!1,locked:!1,locked_step:null,bubbles:A})}init(){try{let t=document.querySelector(this.wz_class);if(!t)throw new Error(this.i18n.empty_wz);if(t.getAttribute("data-wz-load")==="true")return void console.warn(`${this.wz_class} : ${this.i18n.already_defined}`);let e=t;switch(this.buttons||this.nav||console.warn(this.i18n.no_nav),e.classList.add(this.wz_ori.replace(".","")),e.tagName==="FORM"&&(this.form=!0),this.checkAndPrepare(e),this.navigation){case"all":case"nav":this.setNavEvent(),this.setBtnEvent();break;case"buttons":this.setBtnEvent()}e.style.display=e.classList.contains("vertical")?"flex":"block",e.setAttribute("data-wz-load","true"),document.dispatchEvent(new CustomEvent("wz.ready",{bubbles:this.bubbles,detail:{target:this.wz_class,elem:e}}))}catch(t){console.error(t)}}update(){let t=document.querySelector(this.wz_class);if(!t)throw new Error(this.i18n.empty_wz);if(t.getAttribute("data-wz-load")!=="true")throw new Error(this.i18n.empty_wz);this.checkAndPrepare(t),this.content_update=!1,t.dispatchEvent(new CustomEvent("wz.update",{bubbles:this.bubbles,detail:{target:this.wz_class,elem:t}}))}reset(){this.setCurrentStep(0);let t=document.querySelector(this.wz_class),e=t.querySelector(this.wz_nav),s=t.querySelector(this.wz_content);if(this.buttons){let n=t.querySelector(this.wz_buttons),i=n.querySelector(`${this.wz_button}${this.wz_next}`),r=n.querySelector(`${this.wz_button}${this.wz_prev}`),o=n.querySelector(`${this.wz_button}${this.wz_finish}`);this.checkButtons(i,r,o)}this.nav&&(e.querySelectorAll(this.wz_step).forEach(n=>n.classList.remove("active")),e.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active")),s.querySelectorAll(this.wz_step).forEach(n=>n.classList.remove("active")),s.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active"),t.dispatchEvent(new Event("wz.reset",{bubbles:this.bubbles}))}lock(){this.locked=!0,this.locked_step=this.getCurrentStep()}unlock(){this.locked=!1,this.locked_step=null,document.querySelector(this.wz_class).dispatchEvent(new Event("wz.unlock",{bubbles:this.bubbles}))}prefabSteps(t,e,s){let n=this.getCurrentStep();t.forEach((i,r)=>{i.setAttribute("data-wz-step",r),this.nav&&s[r].setAttribute("data-wz-step",r)}),this.nav&&(s.forEach(i=>i.classList.remove("active")),s[n].classList.add("active"),e.classList.add(this.wz_nav_style)),t.forEach(i=>i.classList.remove("active")),t[n].classList.add("active"),this.setButtons()}updateToForm(){let t=document.querySelector(this.wz_class),e=t.querySelector(this.wz_content);if(e.tagName!=="FORM"){let s=e.getAttribute("class"),n=e.innerHTML;e.remove();let i=document.createElement("form");i.setAttribute("method","POST"),i.setAttribute("class",`${s} ${this.wz_form.replace(".","")}`),i.innerHTML=n,t.appendChild(i)}}checkForm(){let t=document.querySelector(this.wz_class).querySelector(this.wz_content),e=t.querySelectorAll(this.wz_step)[this.getCurrentStep()].querySelectorAll("input, textarea, select");return e.length>0?this.formValidator(t,e):{error:!1}}setNav(t){let e=t.querySelector(this.wz_nav);if(e&&this.nav&&(e.remove(),e=null),!e&&this.nav){let s=t.querySelector(this.wz_content).querySelectorAll(this.wz_step),n=document.createElement("aside");n.classList.add(this.wz_nav.replace(".","")),s.forEach((i,r)=>{let o=document.createElement("div"),a=i.getAttribute("data-wz-title")||`${this.i18n.title} ${r}`;o.classList.add(this.wz_step.replace(".","")),this.navigation==="buttons"&&o.classList.add("nav-buttons");let c=document.createElement("span");c.classList.add("dot"),o.appendChild(c);let h=document.createElement("span");h.innerHTML=a,o.appendChild(h),n.appendChild(o)}),t.prepend(n)}}setButtons(){let t=document.querySelector(this.wz_class),e=t.querySelector(this.wz_buttons);if(e&&this.buttons&&(e.remove(),e=null),!e&&this.buttons){let s=document.createElement("aside");s.classList.add(this.wz_buttons.replace(".",""));let n=this.wz_button_style.replace(/\./g,"").split(" "),i=document.createElement("button");i.innerHTML=this.prev,i.classList.add(this.wz_button.replace(".",""),...n,this.wz_prev.replace(".","")),this.navigation==="nav"&&(i.style.display="none"),s.appendChild(i);let r=document.createElement("button");r.innerHTML=this.next,r.classList.add(this.wz_button.replace(".",""),...n,this.wz_next.replace(".","")),this.navigation==="nav"&&(r.style.display="none"),s.appendChild(r);let o=document.createElement("button");o.innerHTML=this.finish,o.classList.add(this.wz_button.replace(".",""),...n,this.wz_finish.replace(".","")),s.appendChild(o),this.checkButtons(r,i,o),t.appendChild(s)}}checkButtons(t,e,s){let n=this.getCurrentStep(),i=this.steps-1;n===0?e.setAttribute("disabled","true"):e.removeAttribute("disabled"),n===i?(t.setAttribute("disabled","true"),s.style.display="block"):(s.style.display="none",t.removeAttribute("disabled"))}checkAndPrepare(t){this.setNav(t);let e=t.querySelector(this.wz_content);if(!e)throw new Error(this.i18n.empty_content);let s=e.querySelectorAll(this.wz_step);if(!s.length)throw new Error(this.i18n.empty_content);let n,i;if(this.nav){if(n=t.querySelector(this.wz_nav),!n)throw new Error(this.i18n.empty_nav);if(i=n.querySelectorAll(this.wz_step),!i.length)throw new Error(this.i18n.empty_nav);if(i.length!==s.length)throw new Error(this.i18n.diff_steps)}this.steps=s.length,this.prefabSteps(s,n,i)}onClick(t){let e=document.querySelector(this.wz_class);if(this.locked&&this.locked_step===this.getCurrentStep())return void e.dispatchEvent(new Event("wz.lock",{bubbles:this.bubbles}));let s=t.closest(this.wz_class),n=s.querySelector(this.wz_nav),i=s.querySelector(this.wz_content),r=t.classList.contains(this.wz_button.replace(".","")),o=t.classList.contains(this.wz_step.replace(".","")),a=t.getAttribute("data-wz-step");a=a!==null?parseInt(a):this.getCurrentStep(),r&&(t.classList.contains(this.wz_prev.replace(".",""))?(a-=1,e.dispatchEvent(new Event("wz.btn.prev",{bubbles:this.bubbles}))):t.classList.contains(this.wz_next.replace(".",""))&&(a+=1,e.dispatchEvent(new Event("wz.btn.next",{bubbles:this.bubbles}))));let c=a>this.getCurrentStep();if(o&&(c?e.dispatchEvent(new Event("wz.nav.forward",{bubbles:this.bubbles})):a<this.getCurrentStep()&&e.dispatchEvent(new Event("wz.nav.backward",{bubbles:this.bubbles}))),this.form&&this.navigation!=="buttons"&&c&&a!==this.getCurrentStep()+1&&(a=a>=this.last_step?this.last_step:this.getCurrentStep()+1),this.form){let h=this.checkForm();if(h.error&&(c&&e.dispatchEvent(new CustomEvent("wz.error",{bubbles:this.bubbles,detail:{id:"form_validation",msg:this.i18n.form_validation,target:h.target}})),this.last_step=this.getCurrentStep(),this.getCurrentStep()<a))return}if(a!=null&&this.setCurrentStep(a),this.buttons){let h=s.querySelector(this.wz_buttons),u=h.querySelector(`${this.wz_button}${this.wz_next}`),l=h.querySelector(`${this.wz_button}${this.wz_prev}`),d=h.querySelector(`${this.wz_button}${this.wz_finish}`);this.checkButtons(u,l,d)}this.nav&&(n.querySelectorAll(this.wz_step).forEach(h=>h.classList.remove("active")),n.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active")),i.querySelectorAll(this.wz_step).forEach(h=>h.classList.remove("active")),i.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active")}onClickFinish(){this.form?this.checkForm().error||document.querySelector(this.wz_class).dispatchEvent(new Event("wz.form.submit",{bubbles:this.bubbles})):document.querySelector(this.wz_class).dispatchEvent(new Event("wz.end",{bubbles:this.bubbles}))}setCurrentStep(t){this.current_step=this.setStep(t)}getCurrentStep(){return this.current_step}setStep(t){let e=document.querySelector(this.wz_class).querySelector(this.wz_content);if(!e.querySelector(`${this.wz_step}[data-wz-step="${t}"]`)){let s=e.querySelectorAll(this.wz_step).length-1;t=Math.min(s,t)}return this.last_step=Math.max(t,this.last_step),parseInt(t,10)}setNavEvent(){document.querySelector(this.wz_class).addEventListener("click",t=>{let e=t.target.closest(`${this.wz_nav} ${this.wz_step}`);e&&(t.preventDefault(),this.onClick(e))})}setBtnEvent(){document.querySelector(this.wz_class).addEventListener("click",t=>{let e=t.target.closest(`${this.wz_buttons} ${this.wz_button}`);e&&(t.preventDefault(),e.classList.contains(this.wz_finish.replace(".",""))?this.onClickFinish():this.onClick(e))})}formValidator(t,e){let s=!1,n=[];return e.forEach(i=>{let r=i.required||i.classList.contains("required"),o=i.classList.contains("on-active-required"),a=i.getAttribute("data-require-if");if(a){let[h,u]=a.split(":"),l=t.querySelector(`#${h}`);l&&(l.type==="checkbox"||l.type==="radio"?l.checked:l.value)===u&&(r=!0)}let c=!0;(r||o)&&(c=this.validateField(i),c||(s=!0,n.push(i),this.highlight&&this.highlightElement(i,this.highlight_type.error)))}),{error:s,target:n}}validateField(t){switch(t.tagName){case"INPUT":return t.type==="checkbox"||t.type==="radio"?t.checked:t.value.trim()!=="";case"SELECT":case"TEXTAREA":return t.value.trim()!=="";default:return!0}}highlightElement(t,e){t.classList.add(this.wz_highlight.replace(".",""),e),setTimeout(()=>{t.classList.remove(this.wz_highlight.replace(".",""),e)},this.highlight_time)}},b=_.A;try{window.Wizard=b}catch{}})();
